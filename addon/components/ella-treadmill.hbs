<ella-treadmill
  id={{this.this.elementId}}
  class="ella-treadmill
    {{if this.resizing "is-resizing" "not-resizing"}}
    {{if this.scrolling "is-scrolling" "not-scrolling"}}"
  role="list"
  data-scroll-top={{this.data-scroll-top}}
  data-scroll-delta={{this.topDelta}}
  data-first-visible-index={{this.startingIndex}}
  data-visible-items={{this.numberOfVisibleItems}}
>
  <style type="text/css">
    #{{this.elementId}} {
    position: relative;
    {{#if this.totalHeight}}
      height: {{this.totalHeight}}{{this._rowUnit}};
    {{/if}}
    width: 100%;
    display: flex;
    flex-wrap: wrap;
    align-content: flex-start;
    box-sizing: border-box;
    }

    #{{this.elementId}} .ella-treadmill-item {
      -webkit-overflow-scrolling: 'touch';
    }

    #{{this.elementId}}.is-scrolling .ella-treadmill-item {
      pointer-events: none;
    }
  </style>

  {{#each this.indices as |_ idx|}}
    <EllaTreadmillItem
      @parent={{this}}
      @index={{get this.visibleIndexes (concat "" idx)}}
      @item={{get this.visibleContent (concat "" idx)}}
      @height={{this._row}}
      @heightUnit={{this._rowUnit}}
      @columns={{this.columns}}
      @pageSize={{this.numberOfVisibleItems}}
      @fluctuate={{this.fluctuate}}
      @fluctuateColumn={{this.fluctuateColumn}}
      @on-insert=this.listItemInserted
      @on-update=this.listItemUpdated
      @on-destroy=this.listItemDestroyed
      as |item index|
    >
      {{#if (has-block)}}
        {{yield item index}}
      {{else}}
        {{get this.visibleContent (concat "" idx)}}
      {{/if}}
    </EllaTreadmillItem>
  {{else}}
    {{yield to="inverse"}}
  {{/each}}
</ella-treadmill>
